name: Anvil MyBizz Development
version: 1.0.0
schema: v1

# ============================================================================
# MODELS - Configured for different roles per Continue.dev best practices
# ============================================================================

models:
  # Chat, Plan, Edit
  - name: gpt-5.2-codex
    provider: openrouter
    model: openai/gpt-5.2-codex
    apiBase: https://openrouter.ai/api/v1
    apiKey: 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
    roles:
      - chat
      - edit
      - summarize
    defaultCompletionOptions:
      temperature: 0.5
      maxTokens: 8000

  # Apply
  - name: morph-v3-large
    provider: openrouter
    model: morph/morph-v3-large
    apiBase: https://openrouter.ai/api/v1
    apiKey: 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
    roles:
      - apply

  #Autocomplete
  - name: codestral-2508
    provider: openrouter
    model: mistralai/codestral-2508
    apiBase: https://openrouter.ai/api/v1
    apiKey: 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
    roles:
      - autocomplete
    defaultCompletionOptions:
      temperature: 0.1
      maxTokens: 150

  # Embed
  - name: text-embedding-3-small
    provider: openrouter
    model: openai/text-embedding-3-small
    apiBase: https://openrouter.ai/api/v1
    apiKey: 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
    roles:
      - embed

  # Rerank
  - name: voyage-rerank-2
    provider: voyageai
    model: rerank-2
    apiBase: https://openrouter.ai/api/v1
    apiKey: your-voyageai-key
    roles:
      - rerank
      - chat

# ============================================================================
# RULES - Core AI Instructions
# ============================================================================

rules:
  # ==========================================================================
  # MYBIZZ PROJECT OVERVIEW
  # ==========================================================================
  - |
    ## MYBIZZ PLATFORM - CRITICAL CONTEXT
    
    **Current App:** Mybizz_core_v1_2_dev (Development workspace)
    **Status:** Post initial build - Active development (as of Jan 16, 2026)
    **NOT Multi-Tenant:** Single-tenant application (no instance_id filtering)
    
    **Implemented Structure (12a_client-scaffold.md):**
    - 13 client packages, 103 forms, 46 row templates
    - 11 server packages (server_analytics, server_auth, server_bookings, etc.)
    - Material 3 theme throughout
    
    **Development Model:** Solo founder + AI assistance
    **Platform:** Anvil Works (Python web framework)
    **UI Standard:** Material Design 3 (M3) exclusively
    
    **DOCUMENTATION LOCATIONS:**
    - Anvil Standards: `C:\_Data\_Mybizz\mybizz-core\theme\assets\dev-docs\Anvil_Methods\`
    - MyBizz Specs: `C:\_Data\_Mybizz\mybizz-core\theme\assets\dev-docs\Mybizz_Methods\`

  # ==========================================================================
  # ANVIL.WORKS FUNDAMENTALS
  # ==========================================================================
  - |
    ## ANVIL.WORKS ARCHITECTURE
    
    ### Startup Pattern (anvil_startup.md):
    - App starts with Startup Form (HomePage), NOT startup module
    - Routing logic in HomePage.__init__ based on user role
    - Client modules don't self-execute - import explicitly
    
    ### Data Tables (anvil_cop_data_tables.md):
    **CRITICAL:**
    - NEVER access Data Tables from client code
    - ALL access MUST be server-side only
    - Use `row.get_id()` for row IDs (returns tuple like `[169162, 297786594]`)
    - Server functions use `@anvil.server.callable`
    - NO instance_id filtering (NOT multi-tenant)
    
    ### M3 Components (anvil_m3_component_recommendations.md):
    **Essential (Always Use):**
    - NavigationDrawerLayout, NavigationLink
    - Text, Heading (M3 typography roles)
    - Button (filled/outlined/text roles)
    - TextBox, TextArea, DropdownMenu (ALWAYS outlined role)
    - Checkbox, RadioButton, DatePicker
    - Card (elevated for metrics, outlined for forms)
    - ColumnPanel, LinearPanel, FlowPanel
    
    **NEVER Use:**
    - âŒ Anvil Extras components (Tabs, Pivot, MultiSelectDropDown, etc.)
    - âŒ Custom sidebars â†’ Use NavigationDrawerLayout
    - âŒ Link + click handlers â†’ Use NavigationLink.navigate_to
    
    ### Navigation (anvil_cop_m3_navigation_routing.md):
    **Two Systems:**
    1. **M3 NavigationLink** - Internal SPA (authenticated areas)
       - Set `navigate_to` property, NOT click handlers
       - No URLs, no browser history
    
    2. **Routing Dependency** (3PIDO5P3H4VPEMPL) - URL-based
       - Public pages, shareable URLs
       - Browser back/forward works
    
    ### Packages (anvil_packages_namespaces.md):
    **3-Tier Architecture:**
    ```
    client/              # Presentation
      users/
      orders/
    
    server/              # Business Logic
      users/
        service.py     # @anvil.server.callable
        repository.py  # Data Tables access
    ```

  # ==========================================================================
  # PYTHON CODING STANDARDS
  # ==========================================================================
  - |
    ## PYTHON & ANVIL CODING (anvil_cop_coding.md)
    
    **Philosophy:** Fail Fast in Dev, Fail Safely in Prod
    
    ### 1. Docstrings (Google Style - Mandatory):
    ```python
    def function(price: float, tax: float) -> float:
        """
        Calculate total with tax.
        
        Args:
            price (float): Base price.
            tax (float): Tax rate (decimal).
        
        Returns:
            float: Final price.
        
        Raises:
            ValueError: If negative values.
        """
    ```
    
    ### 2. Type Hints (Mandatory):
    All public functions must have type annotations.
    
    ### 3. Logging (NO print() in server):
    ```python
    import logging
    logger = logging.getLogger(__name__)
    
    logger.debug()    # Dev only
    logger.info()     # Normal ops
    logger.warning()  # Unexpected but OK
    logger.error()    # Operation failed
    logger.critical() # System at risk
    ```
    
    ### 4. Exceptions:
    - NEVER use `except:` or `except: pass`
    - Catch specific exceptions only
    - Preserve tracebacks: `raise` (no args)
    - Chain: `raise NewError() from e`
    
    ### 5. Pure Logic Extraction (CRITICAL):
    ```python
    # order_logic.py - No Anvil imports
    def calculate_total(price, tax_rate, max_total):
        """Pure business logic - fully testable"""
        if price < 0:
            raise OrderError("Negative price")
        # ... pure logic
        return {"subtotal": s, "tax": t, "total": tot}
    
    # server_orders.py - Thin wrapper
    @anvil.server.callable
    def save_order(order_id, price):
        result = calculate_total(price, 0.2, 10000)
        app_tables.orders.get(id=order_id).update(**result)
        return result
    ```
    
    **Why:** Fast testing, no UI/DB dependencies, refactor-safe
    
    ### 6. Testing (anvil_cop_testing.md):
    ```python
    # test_order_logic.py - Server Module
    from .order_logic import calculate_total
    
    def test_valid():
        assert calculate_total(100, 0.2, 500)["total"] == 120
    
    def run_all_tests():
        test_valid()
        return "All passed"
    ```
    Run in Server Console: `run_all_tests()`

  # ==========================================================================
  # MYBIZZ ARCHITECTURE (04_architecture_specification.md)
  # ==========================================================================
  - |
    ## MYBIZZ ARCHITECTURE STANDARDS
    
    ### Form Patterns:
    **List Forms** (ContactListForm, ProductListForm):
    - NavigationDrawerLayout
    - Heading (headline-large) - Title
    - LinearPanel - Filters/search/actions
    - DataGrid - Data listing
    - IconButtonMenu - Row actions
    
    **Editor Forms** (ContactEditorForm):
    - Card (outlined) - Container
    - Heading (headline-small) - Sections
    - TextBox/TextArea (outlined) - Inputs
    - DropdownMenu (outlined) - Selections
    - LinearPanel - Action buttons (Save/Cancel)
    
    **Dashboard Forms**:
    - Card (elevated) - Metric widgets
    - Plot - Charts
    - RepeatingPanel - Activity feeds
    
    ### Data Binding (self.item pattern):
    ```python
    class ContactEditor(ContactEditorTemplate):
        def __init__(self, contact=None, **properties):
            self.item = contact or {}  # BEFORE init_components
            self.init_components(**properties)
        
        def btn_save_click(self, **event_args):
            # Writeback auto-updates self.item
            anvil.server.call('save_contact', self.item)
    ```
    
    ### Server Function Pattern:
    ```python
    @anvil.server.callable
    @anvil.users.authenticated
    def save_contact(contact_data):
        """Save contact - NO instance_id (not multi-tenant)"""
        user = anvil.users.get_user()
        
        if contact_data.get('id'):
            # Update existing
            row = app_tables.contacts.get(id=contact_data['id'])
            row.update(**contact_data)
        else:
            # Create new
            row = app_tables.contacts.add_row(**contact_data)
        
        return dict(row)
    ```

  # ==========================================================================
  # MYBIZZ DEVELOPMENT PLAN (03_dev_plan.md)
  # ==========================================================================
  - |
    ## DEVELOPMENT PLAN STRUCTURE
    
    **10 Phases, 37 Stages, 350+ Tasks**
    
    **Key Phases:**
    1. Foundation (Auth, roles, settings)
    2. CRM Core (Contacts, tasks, activities)
    3. Marketing (Campaigns, email, landing pages)
    4. Bookings (Appointments, rooms, time tracking)
    5. E-commerce (Products, orders, subscriptions)
    6. Content (Blog, KB, public pages)
    7. Security & Compliance
    8. Testing & QA
    9. Performance & Optimization
    10. Documentation
    
    **When implementing features:**
    - Reference phase/stage/task numbers
    - Follow M3 component standards from plan
    - Check 06_database_schema.md for tables
    - Check 07_user-flows.md for UX
    - Check 08_sitemap.md for navigation

  # ==========================================================================
  # DATABASE SCHEMA (06_database_schema.md)
  # ==========================================================================
  - |
    ## DATABASE TABLES
    
    **Core Tables:**
    - users (auth, roles)
    - contacts (CRM)
    - bookings (appointments, rooms)
    - products (e-commerce)
    - orders, order_items
    - blog_posts, blog_categories
    - campaigns (marketing)
    - settings (app config)
    
    **Row ID Pattern:**
    - Use built-in `row.get_id()` for internal refs
    - Optional user-visible IDs (e.g., `contact_id` string)
    - NO custom ID columns unless needed for display
    
    **Column Types:**
    - string, number, bool, date, datetime
    - simpleObject (JSON), media
    - link_single, link_multiple

  # ==========================================================================
  # NOMENCLATURE (05_nomenclature.md)
  # ==========================================================================
  - |
    ## NAMING CONVENTIONS
    
    ### Component Prefixes:
    - btn_ (Button)
    - txt_ (TextBox/TextArea)
    - dd_ (DropdownMenu)
    - lbl_ (Text/Heading for display)
    - cb_ (Checkbox)
    - rb_ (RadioButton)
    - dp_ (DatePicker)
    - col_ (ColumnPanel)
    - lp_ (LinearPanel)
    - card_ (Card)
    - dg_ (DataGrid)
    - rp_ (RepeatingPanel)
    - nav_ (NavigationLink)
    
    ### Form Names:
    - {Entity}{Type}Form
    - Types: ListForm, EditorForm, ViewerForm, DashboardForm
    - Examples: ContactListForm, BookingEditorForm
    
    ### Server Modules:
    - {purpose}_service.py
    - Examples: customer_service.py, booking_service.py
    
    ### Terminology:
    - Client = MyBizz subscriber (business owner)
    - Customer = Client's end user
    - Visitor = Public website visitor

  # ==========================================================================
  # WORKING WITH NON-TECHNICAL MANAGER
  # ==========================================================================
  - |
    ## COMMUNICATION GUIDELINES
    
    You're working with a solo founder (non-technical project manager).
    
    **Communication:**
    - Clear, simple language
    - Avoid jargon (or explain it)
    - Ask clarifying questions
    - Highlight risks proactively
    
    **Decisions:**
    - Suggest best practices with trade-offs
    - Ask approval for major changes
    - Flag pattern conflicts
    - Offer alternatives
    
    **Output:**
    - Working code, not pseudocode
    - Complete files for creation
    - Changed sections only for edits
    - Explain file purposes
    - Include setup instructions

  # ==========================================================================
  # AGENT MODE GUIDELINES
  # ==========================================================================
  - |
    ## AGENT MODE USAGE
    
    **Before Using Tools:**
    - Read relevant documentation FIRST
    - Plan file changes
    - Consider existing code impact
    
    **Reading Documentation:**
    - ALWAYS check Anvil_Methods for standards
    - ALWAYS check Mybizz_Methods for app specs
    - Use grep_search to find specific topics
    - Use file_glob_search to locate documentation files
    - Use read_file to examine full documents
    
    **Searching Code:**
    - Use grep_search for content search (supports regex)
    - Use file_glob_search for file pattern matching
    - Use ls for directory exploration
    - Use read_file to examine specific files
    
    **File Operations:**
    - Read before modifying
    - Surgical edits when possible
    - Preserve patterns
    - Update related files (tests, docs)
    
    **Safety:**
    - Don't delete without permission
    - Don't modify schema without approval
    - Test before marking complete

# ============================================================================
# CONTEXT
# ============================================================================

context:
  - provider: code
  - provider: diff
  - provider: terminal
  - provider: problems
  - provider: codebase
  - provider: open
  - provider: file
# ============================================================================
# DOCS
# ============================================================================

docs:
  - name: Anvil.works
    startUrl: https://anvil.works/docs
  - name: Material Design 3
    startUrl: https://m3.material.io/
  - name: Python
    startUrl: https://docs.python.org/3/

# ============================================================================
# PROMPTS (Slash Commands)
# ============================================================================

prompts:
  - name: test-uplink
    description: Test Anvil Uplink connection
    prompt: |
      Test the Anvil Uplink connection.
      
      **Prerequisites:**
      - `ANVIL_UPLINK_KEY` environment variable set
      - `anvil-uplink` installed (`pip install anvil-uplink`)
      
      **Test Method:**
      ```bash
      python scripts/test_uplink.py
      ```
      
      **What happens:**
      1. Connects to Anvil via Uplink
      2. Calls `test_uplink_connection()` server function
      3. Displays result and disconnects
      
      **Expected Output:**
      ```
      Connected to Anvil
      Test successful!
         Status: success
         Message: Uplink connection is working!
      Disconnected
      ```
      
      **If it fails:**
      - Check `ANVIL_UPLINK_KEY` is set correctly
      - Check Anvil app is running
      - Check test function exists in server_shared/utilities.py
      
      **Reference:** `theme/assets/Anvil_Methods/anvil_cop_uplink.md`

  - name: read-all-docs
    description: Read ALL Anvil_Methods and Mybizz_Methods documentation
    prompt: |
      Read ALL documentation to understand the complete MyBizz system.
      
      **ANVIL_METHODS (Standards):**
      1. anvil_cop_coding.md
      2. anvil_cop_data_tables.md
      3. anvil_cop_data_tables_assessment.md
      4. anvil_cop_m3_navigation_routing.md
      5. anvil_cop_uplink.md
      6. anvil_cop_testing.md
      7. anvil_cop_components_and_widgets.md
      8. anvil_m3_component_recommendations.md
      9. anvil_m3_quick_reference.md
      10. anvil_full_components_list.md
      11. anvil_packages_namespaces.md
      12. anvil_slidesheets.md
      13. anvil_startup.md
      14. README.md
      
      **MYBIZZ_METHODS (App Specs):**
      1. 01_conceptual_design.md - Platform vision
      2. 02_dev_policy.md - Development policies
      3. 03_dev_plan.md - 10 phases, 37 stages, 350+ tasks
      4. 04_architecture_specification.md - Architecture patterns
      5. 05_nomenclature.md - Naming conventions
      6. 06_database_schema.md - Data Tables structure
      7. 07_user-flows.md - User journeys
      8. 08_sitemap.md - Navigation structure
      9. 09_project_status.md - Current state
      10. 10_ref_security_compliance.md - Security standards
      11. 11_crm_server_implementation_reference.md - CRM patterns
      12. 12a_client-scaffold.md - Implemented structure
      
      Base paths:
      - Anvil: `C:\_Data\_Mybizz\mybizz-core\theme\assets\dev-docs\Anvil_Methods\`
      - MyBizz: `C:\_Data\_Mybizz\mybizz-core\theme\assets\dev-docs\Mybizz_Methods\`
      
      After reading, summarize key patterns for current work.

  - name: search-docs
    description: Search documentation using continue.dev search tools
    prompt: |
      Search all documentation using continue.dev's native search capabilities.
      
      **SEARCH WITH GREP_SEARCH:**
      Use the grep_search tool to search documentation content:
      - Pattern: Your search term (supports regex)
      - Returns: Matching files with line numbers and context
      
      **Example searches:**
      - "NavigationLink" - Find all NavigationLink references
      - "app_tables\." - Find Data Tables usage
      - "@anvil.server.callable" - Find server functions
      
      **SEARCH BY DOCUMENT TYPE:**
      - Anvil_Methods: `C:\_Data\_Mybizz\mybizz-core\theme\assets\dev-docs\Anvil_Methods\`
      - Mybizz_Methods: `C:\_Data\_Mybizz\mybizz-core\theme\assets\dev-docs\Mybizz_Methods\`
      
      **FIND DOCUMENTATION FILES:**
      Use file_glob_search to find specific documentation files:
      - Pattern: "**/*pattern*.md" for fuzzy matching
      - Pattern: "**/anvil_*.md" for Anvil standards
      - Pattern: "**/0*.md" for MyBizz specs numbered 01-09
      
      **WORKFLOW:**
      1. Use grep_search to find content matches
      2. Use file_glob_search to locate specific files
      3. Use read_file to examine full document content
      
      **What would you like to search for?**

  - name: find-doc
    description: Find and open documentation file
    prompt: |
      Find documentation files using continue.dev's file search capabilities.
      
      **FIND BY PATTERN:**
      Use file_glob_search to locate documentation files:
      
      **Find all documentation:**
      - Pattern: "**/*.md" in dev-docs directory
      
      **Find Anvil standards:**
      - Pattern: "**/anvil_*.md"
      - Examples: anvil_cop_coding.md, anvil_m3_component_recommendations.md
      
      **Find MyBizz specs:**
      - Pattern: "**/0*.md" (numbered specs 01-12)
      - Pattern: "**/*database*.md" (specific topic)
      
      **LIST DOCUMENTATION DIRECTORIES:**
      Use ls tool to explore structure:
      - Path: `C:\_Data\_Mybizz\mybizz-core\theme\assets\dev-docs\`
      - Lists: Anvil_Methods, Mybizz_Methods directories
      
      **WORKFLOW:**
      1. Use file_glob_search with pattern to find files
      2. Use ls to explore directory structure
      3. Use read_file to open and read the document
      
      **What documentation file are you looking for?**

  - name: search-code
    description: Search codebase with continue.dev tools
    prompt: |
      Search MyBizz codebase using continue.dev's native search capabilities.
      
      **SEARCH CODE CONTENT:**
      Use grep_search to find code patterns:
      
      **Common searches:**
      - "@anvil.server.callable" - Find all server functions
      - "app_tables\." - Find Data Tables queries
      - "class.*Form" - Find form definitions
      - "def test_" - Find test functions
      - "import anvil" - Find Anvil imports
      
      **SEARCH BY AREA:**
      - Client code: Results include client_code/ paths
      - Server code: Results include server_code/ paths
      - Tests: Results include test_ patterns
      
      **FIND FILES BY NAME:**
      Use file_glob_search to locate specific files:
      - Pattern: "**/*Form.py" - All form files
      - Pattern: "**/test_*.py" - All test files
      - Pattern: "**/*service.py" - All service modules
      
      **LIST PACKAGE STRUCTURE:**
      Use ls tool to explore packages:
      - List client packages: client_code/
      - List server packages: server_code/
      - Recursive listing available
      
      **WORKFLOW:**
      1. Use grep_search to find code patterns
      2. Use file_glob_search to find specific files
      3. Use read_file to examine file contents
      
      **What code are you looking for?**

  - name: explore-structure
    description: Explore codebase structure
    prompt: |
      Explore MyBizz project structure using continue.dev tools.
      
      **EXPLORE CLIENT PACKAGES:**
      Use ls to list client packages:
      - Path: `C:\_Data\_Mybizz\mybizz-core\client_code\`
      - Shows: All 13 client packages (users, orders, contacts, etc.)
      
      Use file_glob_search to find files in packages:
      - Pattern: "client_code/users/**/*.py" - Users package files
      - Pattern: "client_code/**/*Form.py" - All forms
      
      **EXPLORE SERVER PACKAGES:**
      Use ls to list server packages:
      - Path: `C:\_Data\_Mybizz\mybizz-core\server_code\`
      - Shows: All 11 server packages
      
      Use file_glob_search:
      - Pattern: "server_code/users/**/*.py" - Users service files
      - Pattern: "server_code/**/*service.py" - All service modules
      
      **VIEW PACKAGE CONTENTS:**
      Use ls with recursive flag:
      - Lists all files in package hierarchy
      - Shows directory structure
      
      **COUNT FILES:**
      Use file_glob_search results to count:
      - Forms per package: Pattern "client_code/Package/*Form.py"
      - Server functions: grep_search "@anvil.server.callable"
      
      **WORKFLOW:**
      1. Use ls to see top-level structure
      2. Use file_glob_search to find specific file types
      3. Use grep_search to find patterns across codebase
      
      **What part of the structure would you like to explore?**

  - name: implement-feature
    description: Implement feature from development plan
    prompt: |
      Implement a MyBizz feature following all standards.
      
      **WORKFLOW:**
      1. Read 03_dev_plan.md for task details
      2. Read 04_architecture_specification.md for patterns
      3. Read 06_database_schema.md for data structure
      4. Read 07_user-flows.md for UX
      5. Check 12a_client-scaffold.md for existing structure
      6. Read relevant Anvil_Methods standards
      7. Plan: client forms, server functions, pure logic
      8. Extract pure logic (no Anvil imports)
      9. Write pure logic tests
      10. Implement server functions (thin wrappers)
      11. Implement client forms (M3 components)
      12. Test with Uplink
      13. Report completion
      
      **CRITICAL:**
      - NO instance_id filtering (not multi-tenant)
      - Data Tables access ONLY from server
      - Use M3 components exclusively
      - Extract pure logic for testing
      - Follow 05_nomenclature.md naming
      
      **What feature (phase/stage/task)?**

  - name: fix-bug
    description: Debug and fix an issue
    prompt: |
      Debug and fix MyBizz bug.
      
      **WORKFLOW:**
      1. Reproduce (expected vs actual, steps, error)
      2. Analyze (client vs server, check logs)
      3. Locate root cause (trace, check assumptions)
      4. Fix (minimal changes, add handling/validation)
      5. Test (verify fixed, check regression)
      6. Document (root cause, fix explanation)
      
      **Use grep_search to find related code:**
      - Search function names
      - Search error messages
      - Search related patterns
      
      **What bug?**

  - name: review-code
    description: Review for compliance
    prompt: |
      Comprehensive code review for Anvil & MyBizz standards.
      
      **CHECKLIST:**
      **Anvil:**
      - No Data Tables from client
      - @anvil.server.callable on server functions
      - M3 components (no Extras)
      - NavigationLink.navigate_to (not click handlers)
      - self.item + writeback pattern
      - NO instance_id (not multi-tenant)
      
      **Python:**
      - Google-style docstrings
      - Type hints
      - Specific exceptions (no bare except:)
      - Logging (not print())
      - Pure logic extracted
      
      **Naming (05_nomenclature.md):**
      - Component prefixes (btn_, txt_, dd_, etc.)
      - Form names ({Entity}{Type}Form)
      
      **Testing:**
      - Tests exist
      - Pure logic tests
      - Assert statements
      
      **SEVERITY:**
      - ðŸ”´ CRITICAL: Security, data, Anvil violations
      - ðŸŸ¡ MAJOR: Standards, maintainability
      - ðŸŸ¢ MINOR: Style, naming, docs
      
      **Code to review?**

  - name: create-form
    description: Create M3 form
    prompt: |
      Create Anvil form with M3 components.
      
      **BEFORE:**
      1. Read anvil_m3_component_recommendations.md
      2. Read 03_dev_plan.md M3 standards section
      3. Check 12a_client-scaffold.md for existing forms
      
      **STRUCTURE:**
      ```python
      from ._anvil_designer import FormNameTemplate
      from anvil import *
      import anvil.server
      
      class FormName(FormNameTemplate):
          def __init__(self, item=None, **properties):
              self.item = item or {}
              self.init_components(**properties)
              self.setup_form()
          
          def setup_form(self):
              pass
      ```
      
      **COMPONENTS:**
      - Layout: NavigationDrawerLayout, ColumnPanel
      - Input: TextBox/TextArea/DropdownMenu (outlined)
      - Actions: Button (filled/outlined)
      - Display: Card, DataGrid
      
      **BINDING:**
      - self.item before init_components
      - Writeback ON for inputs
      
      **What form?**

  - name: create-server-function
    description: Create server function
    prompt: |
      Create server function following best practices.
      
      **TEMPLATE:**
      ```python
      import anvil.server
      from anvil.tables import app_tables
      import logging
      from .logic import pure_function
      
      logger = logging.getLogger(__name__)
      
      @anvil.server.callable
      @anvil.users.authenticated
      def function_name(param: type) -> type:
          """
          Description.
          
          Args:
              param (type): Description
          
          Returns:
              type: Description
          """
          try:
              # Validate
              if not param:
                  raise ValueError("Required")
              
              # Pure logic
              result = pure_function(param)
              
              # Data Tables (NO instance_id)
              rows = app_tables.table.search(field=value)
              
              return [dict(r) for r in rows]
          
          except Exception as e:
              logger.error(f"Error: {e}", exc_info=True)
              raise
      ```
      
      **RULES:**
      - @anvil.server.callable
      - NO instance_id
      - Extract pure logic
      - Return simple types
      - Type hints + docstrings
      
      **What function?**

  - name: extract-pure-logic
    description: Extract pure logic for testing
    prompt: |
      Extract pure business logic from Anvil code.
      
      **PATTERN:**
      ```python
      # logic_module.py - No Anvil imports
      class LogicError(Exception):
          pass
      
      def calculate(price, tax_rate, max_total):
          """Pure - fully testable"""
          if price < 0:
              raise LogicError("Negative")
          # ... logic
          return {"result": value}
      ```
      
      **TEST:**
      ```python
      # test_logic.py - Server Module
      from .logic import calculate
      
      def test_valid():
          assert calculate(100, 0.2, 500)["result"] == 120
      
      def run_all():
          test_valid()
          return "Passed"
      ```
      
      Run: `run_all()` in Server Console
      
      **What code?**

  - name: write-tests
    description: Write tests
    prompt: |
      Write tests following standards.
      
      **STRUCTURE:**
      ```python
      # test_module.py - Server Module
      from .logic import function, Error
      
      def test_happy_path():
          result = function(valid)
          assert result == expected
      
      def test_edge_case():
          try:
              function(invalid)
              assert False
          except Error:
              pass
      
      def run_all_tests():
          test_happy_path()
          test_edge_case()
          return "All passed"
      ```
      
      **NAMING:** test_<function>_<scenario>_<expected>
      
      **TYPES:**
      - Pure logic (preferred - no Anvil)
      - Integration (Uplink required)
      
      **What needs tests?**

# ============================================================================
# MCP SERVERS (Future)
# ============================================================================

mcpServers: []

# ============================================================================
# TELEMETRY
# ============================================================================

allowAnonymousTelemetry: false

